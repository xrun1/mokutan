<!DOCTYPE html><html>
<head>
    <title>{{folder.name or folder}} | {{DISPLAY_NAME}}</title>

    <meta charset=utf-8>
    <meta name=viewport content="width=device-width">
    <meta name=referrer content=strict-origin>
    {% if ocr.running %}
       <meta http-equiv=refresh content=5>
    {% endif %}

    <link rel=stylesheet href=/style/main.css>
</head>

<body>
    {% include "nav.html.jinja" %}

    <div id=non-images>
        {% for path in ocr.non_images %}
            <a href="{{to_url(path)}}">
                <h4>{{path.name}}</h4>

                <img
                    alt="{{'ðŸ—€' if path.is_dir() else 'ðŸ—Ž'}}"
                    src="/thumbnail{{to_url(path)}}"
                    loader=lazy
                >
            </a>
        {% endfor %}
    </div>

    {% for img in ocr.images %}
        {% set anchor = img.stem.replace(' ', '') %}
        <h4><a href="#{{anchor}}">{{img.name}}</a></h4>

        <div class=page>
            <img id="{{anchor}}" src="{{to_url(img)}}" loader=lazy>

            {% for box in ocr.boxes(img) %}
                <p style="
                    left: {{box.x * 100}}%;
                    top: {{box.y * 100}}%;
                    min-width: {{box.w * 100}}%;
                    max-width: calc({{100 - box.x * 100}}% - 2rem);
                    min-height: {{box.h * 100}}%;
                    font-size: clamp(1rem, {{box.font_size}}vw, 2rem);
                    {% if box.vertical %}
                        writing-mode: vertical-rl;
                    {% endif %}
                ">
                    {{"<br>".join(box.lines)}}
                </p>
            {% endfor %}
        </div>
    {% endfor %}

    {% include "nav.html.jinja" %}
</body></html>
