<!DOCTYPE html><html>
<head>
    <title>{{path.name or path}} | {{DISPLAY_NAME}}</title>

    <meta charset=utf-8>
    <meta name=viewport content="width=device-width">
    <meta name=referrer content=strict-origin>
    {% if path.ocr_running %}
       <meta http-equiv=refresh content=5>
    {% endif %}

    <link rel=stylesheet href=/style/main.css>
</head>

<body>
    {% include "nav.html.jinja" %}

    <div id=non-images>
        {% for path in path.non_images %}
            <a id={{to_anchor(path)}} href="{{to_url(path)}}">
                <h4>{{path.name}}</h4>

                <img
                    alt="{{'ðŸ—€' if path.is_dir() else 'ðŸ—Ž'}}"
                    src="/thumbnail{{to_url(path)}}"
                    loading=lazy
                >
            </a>
        {% endfor %}
    </div>

    {% for img in path.images %}
        {% set anchor = img.stem.replace(' ', '') %}
        <h4><a href="#{{to_anchor(img)}}">{{img.name}}</a></h4>

        <div class=page>
            <img id="{{to_anchor(img)}}" src="{{to_url(img)}}" loading=lazy>

            {% for box in path.ocr_boxes(img) %}
                <p style="
                    left: {{box.x * 100}}%;
                    top: {{box.y * 100}}%;
                    min-width: {{box.w * 100}}%;
                    max-width: calc({{100 - box.x * 100}}% - 2rem);
                    min-height: {{box.h * 100}}%;
                    font-size: min(
                        {{box.font_size}}px,
                        {{box.font_size * 100 / box.image_w}}vw
                    );
                    {% if box.vertical %}
                        writing-mode: vertical-rl;
                    {% endif %}
                ">
                    {{"<br>".join(box.lines)}}
                </p>
            {% endfor %}
        </div>
    {% endfor %}

    {% include "nav.html.jinja" %}
</body></html>
