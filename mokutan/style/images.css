#images {
    flex-grow: 1;
    background: linear-gradient(
        180deg, transparent, black 20%, black 80%, transparent
    );
}

.image-entry {
    overflow: hidden;
    scrollbar-gutter: stable both-edges;

    &:has(.ocr-group:hover) {
        overflow: auto;
    }

    & img {
        max-width: 100%;
        border: 1px solid var(--borders);
        user-select: none;
        pointer-events: none;  /* fix text select not clearing on img click */
        object-fit: contain;
        height: auto;
    }
}

.image-entry-info {
    margin: 2rem auto;
    border: 1px solid var(--borders);
    padding: 0.3rem 0.75rem;
    font-size: 1.4rem;

    & a {
        text-decoration: none;
    }

    & h3 {
        display: inline;
        margin: 0;

        & a {
            color: var(--text);
            &:hover {
                color: var(--text-darker);
            }
        }
    }

    & .refresh {
        display: inline-block;
        scale: 1.3;
        margin-left: 0.5rem;
    }

    & .open-ocr {
        border: none;
        color: var(--accent);
    }
}

.image-entry-wrapper {
    position: relative;
    display: inline-block;

    &:has(.ocr-box-pair:hover) .ocr-box-pair:not(:hover) {
        pointer-events: none;
    }
}

.ocr-group {
    & .full-dots {
        letter-spacing: -0.15em;
    }

    &:not(.has-overlap) {
        transition: opacity 0.2s;
        opacity: 0;

        &:hover {
            opacity: 1;
        }
    }

    &.has-overlap {
        &:not(:has(.ocr-box-pair:hover)) .ocr-box-bg {
            background: transparent;
            outline-color: transparent;
        }
        & .ocr-box-pair {
            & .ocr-box-bg, .ocr-box-fg {
                opacity: 0;
                transition: opacity 0.2s;
            }
            &:hover {
                & .ocr-box-bg, .ocr-box-fg {
                    opacity: 1;
                }
            }
        }
        &:has(.ocr-box-pair:hover) .ocr-box-pair:not(:hover) {
            & .ocr-box-bg {
                opacity: 1;
                z-index: 99;
                background: transparent;
                outline-color: transparent;
                border: 1px solid var(--borders) !important;
            }

        }
    }
}

.ocr-box-bg, .ocr-box-fg {
    font-family: var(--sans);
    white-space-collapse: preserve-breaks;
    text-wrap-mode: nowrap;
    position: absolute;
    text-align: left;
    line-height: 1.1em;
    color: black;
    margin: 0;

    & .anki-mature {
        color: forestgreen;
    }

    & .anki-young {
        color: chocolate;
    }

    & .anki-new {
        color: firebrick;
    }
}

.ocr-box-bg {
    z-index: 100;
    background: white;
    outline: solid white;
    color: transparent;
    user-select: none;
    pointer-events: none;

    & * {
        color: transparent !important;
    }
}

.ocr-box-fg {
    z-index: 101;
}
